<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>For My Pri ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- OPTIONAL: GSAP (animation only, no fonts) -->
<script defer src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>

<style>
/* =========================
   SYSTEM FONT STACK ONLY
   ========================= */
:root {
  --rose: #fb7185;
  --rose-soft: rgba(251,113,133,.35);
  --glass: rgba(255,255,255,.12);
  --glass-border: rgba(255,255,255,.25);
  --bg: radial-gradient(circle at top, #1a1a1a, #000);
}

* { box-sizing: border-box; }

html, body {
  margin: 0;
  min-height: 100vh;
  background: var(--bg);
  color: #fff;
  font-family:
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    Helvetica,
    Arial,
    sans-serif;
  overflow-x: hidden;
}

/* =========================
   SVG HEART ANIMATION
   ========================= */
.heart-wrap {
  width: 120px;
  margin: 0 auto 1rem;
}

.heart-svg {
  width: 100%;
  height: auto;
  animation: heartBeat 1.6s ease-in-out infinite;
  filter: drop-shadow(0 0 18px rgba(251,113,133,.6));
}

@keyframes heartBeat {
  0%, 100% { transform: scale(1); }
  25% { transform: scale(1.08); }
  40% { transform: scale(0.96); }
  60% { transform: scale(1.12); }
}


/* =========================
   HEARTBEAT VISUAL PULSE
   ========================= */
body.heartbeat-pulse {
  animation: pulseBg .4s ease-out;
}
@keyframes pulseBg {
  0% { filter: brightness(1); }
  50% { filter: brightness(1.15); }
  100% { filter: brightness(1); }
}

/* =========================
   MODAL SYSTEM
   ========================= */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.65);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity .4s ease;
}

.overlay.active {
  opacity: 1;
  pointer-events: all;
}

.modal {
  width: min(92vw, 480px);
  padding: 2.2rem;
  border-radius: 22px;
  background: linear-gradient(180deg, var(--glass), rgba(255,255,255,.04));
  border: 1px solid var(--glass-border);
  backdrop-filter: blur(18px);
  box-shadow: 0 0 60px rgba(251,113,133,.25);
  text-align: center;
  transform: scale(.85) translateY(30px);
  opacity: 0;
  transition: all .5s cubic-bezier(.22,1,.36,1);
}

.overlay.active .modal {
  transform: scale(1) translateY(0);
  opacity: 1;
}

/* =========================
   BUTTONS
   ========================= */
.btn {
  border: none;
  border-radius: 999px;
  padding: .9rem 1.6rem;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform .2s ease, box-shadow .2s ease;
}

.btn:active { transform: scale(.95); }

.btn-rose {
  background: var(--rose);
  color: #fff;
  box-shadow: 0 0 25px var(--rose-soft);
}

.btn-green {
  background: #22c55e;
  color: #052e16;
  box-shadow: 0 0 25px rgba(34,197,94,.35);
}

.btn-gray {
  background: #2a2a2a;
  color: #ddd;
}

/* =========================
   FLOAT / MICRO ANIMATIONS
   ========================= */
.float {
  animation: float 3.5s ease-in-out infinite;
}
@keyframes float {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

/* =========================
   TEXT
   ========================= */
h1, h2 {
  color: var(--rose);
  margin-bottom: 1rem;
}

.reason {
  padding: .8rem 1rem;
  border-radius: 14px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.18);
}

.signature {
  margin-top: 2rem;
  font-size: .85rem;
  opacity: .8;
}

/* =========================
   HEART CONFETTI
   ========================= */
.confetti-heart {
  position: fixed;
  top: -20px;
  width: 14px;
  height: 14px;
  background: #fb7185; 
  transform: rotate(45deg);
  opacity: 0.9;
  pointer-events: none;
  animation: fall linear forwards;
}

.confetti-heart::before,
.confetti-heart::after {
  content: "";
  position: absolute;
  width: 14px;
  height: 14px;
  background: inherit;
  border-radius: 50%;
}

.confetti-heart::before {
  top: -7px;
  left: 0;
}

.confetti-heart::after {
  left: -7px;
  top: 0;
}

@keyframes fall {
  to {
    transform: translateY(110vh) rotate(720deg);
    opacity: 0;
  }
}
.final-heart .heart-svg {
  animation-duration: 1.2s;
}

</style>
</head>

<body>

<!-- HEARTBEAT AUDIO -->
<audio id="heartbeat" loop preload="auto">
  <source src="/static/heartbeat.wav" type="audio/wav">
</audio>

<!-- =========================
     MODALS (QUESTS)
     ========================= -->

<div id="m1" class="overlay active">
  <div class="modal float">
    <div class="heart-wrap">
      <svg class="heart-svg" viewBox="0 0 32 29.6" fill="#fb7185">
        <path d="
          M23.6,0
          c-3.4,0-6.4,2.1-7.6,5.1
          C14.8,2.1,11.8,0,8.4,0
          C3.8,0,0,3.8,0,8.4
          c0,9.4,16,21.2,16,21.2
          s16-11.8,16-21.2
          C32,3.8,28.2,0,23.6,0z
        "/>
      </svg>
    </div>
    <h1>Hi Pri ‚ú®</h1>
    <button class="btn btn-rose" onclick="next(2)">Hi üëã</button>
  </div>
</div>

<div id="m2" class="overlay">
  <div class="modal">
    <h2>How are you today, beautiful?</h2>
    <div style="display:grid;gap:1rem;margin-top:1.4rem;">
      <button class="btn btn-green" onclick="next(3)">I‚Äôm doing great üòä</button>
      <button class="btn btn-gray" onclick="sad()">A bit tired üòî</button>
    </div>
  </div>
</div>

<div id="m3" class="overlay">
  <div class="modal">
    <div class="heart-wrap">
      <svg class="heart-svg" viewBox="0 0 32 29.6" fill="#fb7185">
        <path d="
          M23.6,0
          c-3.4,0-6.4,2.1-7.6,5.1
          C14.8,2.1,11.8,0,8.4,0
          C3.8,0,0,3.8,0,8.4
          c0,9.4,16,21.2,16,21.2
          s16-11.8,16-21.2
          C32,3.8,28.2,0,23.6,0z
        "/>
      </svg>
    </div>
    <p id="moodText" style="margin:1.4rem 0;font-style:italic;">
      I was thinking about the <b>Psychology of Money</b> book you got me‚Ä¶
      It reminded me that love is about <b>you</b>.
    </p>
    <button class="btn btn-rose" onclick="next(4)">Continue ‚ù§Ô∏è</button>
  </div>
</div>

<div id="m4" class="overlay">
  <div class="modal">
    <h1>Will you be my Valentine? üåπ</h1>
    <div style="margin-top:2rem;position:relative;height:120px;">
      <button id="yesBtn" class="btn btn-green" onclick="yes()">Yes!</button>
      <button id="noBtn" class="btn btn-rose"
        style="position:absolute;right:0;"
        onmouseover="runNo()">No</button>
    </div>
  </div>
</div>

<div id="final" class="overlay">
  <div class="modal">
    <div class="heart-wrap final-heart">
      <svg class="heart-svg" viewBox="0 0 32 29.6" fill="#fb7185">
        <path d="M23.6,0c-3.4,0-6.4,2.1-7.6,5.1C14.8,2.1,11.8,0,8.4,0
        C3.8,0,0,3.8,0,8.4c0,9.4,16,21.2,16,21.2
        s16-11.8,16-21.2C32,3.8,28.2,0,23.6,0z"/>
      </svg>
    </div>

    <h1>She said YES ‚ù§Ô∏è</h1>

    <div style="display:grid;gap:.8rem;margin-top:1.2rem;">
      <div class="reason">Your thoughtfulness</div>
      <div class="reason">Your smile</div>
      <div class="reason">Your support</div>
      <div class="reason">Our conversations</div>
      <div class="reason">Just you</div>
    </div>

    <p class="signature">
      This page exists only for you.<br>
      Built with love ‚Äî by MENE.
    </p>
  </div>
</div>

<script>
/* =========================
   HEARTBEAT
   ========================= */
const beat = document.getElementById("heartbeat");
let beatOn = false;

function enableBeat() {
  if (beatOn) return;
  beat.volume = .15;
  beat.play().catch(()=>{});
  beatOn = true;
  document.body.removeEventListener("click", enableBeat);
}
document.body.addEventListener("click", enableBeat);

function pulse(v=.25) {
  if (!beatOn) return;
  beat.volume = Math.min(v,.35);
  document.body.classList.add("heartbeat-pulse");
  setTimeout(()=>{
    beat.volume=.15;
    document.body.classList.remove("heartbeat-pulse");
  },400);
}

/* =========================
   MODAL FLOW
   ========================= */
let current = 1;

function show(n) {
  document.getElementById(`m${current}`)?.classList.remove("active");
  document.getElementById(`m${n}`)?.classList.add("active");
  current = n;
  pulse();
}

function next(n){ show(n); }

function sad(){
  document.getElementById("moodText").innerHTML =
    "I hate that you‚Äôre tired‚Ä¶ but I hope this reminds you how deeply I care ‚ù§Ô∏è";

  document.querySelector(".heart-svg").style.filter =
    "drop-shadow(0 0 28px rgba(251,113,133,.9))";

  show(3);
}


/* =========================
   NO BUTTON CHAOS
   ========================= */
function runNo(){
  pulse(.3);
  const no = document.getElementById("noBtn");
  const yes = document.getElementById("yesBtn");

  no.style.left = Math.random()*200+"px";
  no.style.top = Math.random()*80+"px";

  const s = (parseFloat(yes.dataset.s)||1)+.12;
  yes.dataset.s=s;
  yes.style.transform=`scale(${s})`;
}

/* =========================
   FINAL
   ========================= */
function yes() {
  pulse(.35);
  heartConfetti(60);

  localStorage.setItem("priYes", "1");

  document.getElementById("m4").classList.remove("active");
  document.getElementById("final").classList.add("active");
}


if(localStorage.getItem("priYes")){
  document.querySelectorAll(".overlay").forEach(o=>o.classList.remove("active"));
  document.getElementById("final").classList.add("active");
}

/* =========================
   HEART CONFETTI BURST
   ========================= */
function heartConfetti(count = 40) {
  for (let i = 0; i < count; i++) {
    const heart = document.createElement("div");
    heart.className = "confetti-heart";

    const size = Math.random() * 10 + 10;
    heart.style.width = size + "px";
    heart.style.height = size + "px";

    heart.style.left = Math.random() * 100 + "vw";
    heart.style.background = `hsl(${340 + Math.random()*10}, 90%, 70%)`;

    const duration = Math.random() * 2 + 3;
    heart.style.animationDuration = duration + "s";

    document.body.appendChild(heart);

    setTimeout(() => heart.remove(), duration * 1000);
  }
}

</script>

</body>
</html>
